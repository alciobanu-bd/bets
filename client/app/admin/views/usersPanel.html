
<div ng-controller="AdminUsersPanel">

    <input type="text" class="form-control cornered-input" style="width: 30%; margin-bottom: 1.5em;"
        placeholder="Search user" ng-model="searchedUser" typeahead="user.username for user in users | filter:$viewValue"
        ng-keydown="openUserModalOnEnter($event)">

    <div class="row top-buffer-1-em" style="margin-bottom: 2em; font-size: 1.2em;">
        <span class="col-xs-1">&nbsp;</span>
        <span class="col-xs-2">Username</span>
        <span class="col-xs-3">E-mail</span>
        <span class="col-xs-2">Birth date</span>
        <span class="col-xs-2">Register date</span>
        <span class="col-xs-1">Place/Points</span>
        <span class="col-xs-1">Rank</span>
    </div>

    <div ng-repeat="user in users" class="row top-buffer-0-5-em">
        <span class="btn-group col-xs-1">
            <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" role="menu">
                <li><a href="" ng-click="openActivateModal(user)">Activate</a></li>
                <li><a href="">Ban</a></li>
            </ul>
        </span>
        <span class="col-xs-2">{{user.username}}</span>
        <span class="col-xs-3">{{user.email}}</span>
        <span class="col-xs-2">{{user.birthDate | date:'MMM d, y'}}</span>
        <span class="col-xs-2">{{user.registerDate | date:'MMM d, y'}}</span>
        <span class="col-xs-1">{{user.place}}/{{user.points}}</span>
        <span class="col-xs-1">{{RolesFactory.findRoleByName(user.role).beautifulName}}</span>
    </div>

</div>


<script type="text/ng-template" id="profileViewModalAdmin.html">
    <div class="modal-header">
        <h3 class="modal-title">{{user.username}}</h3>
    </div>
    <div class="modal-body">
        <div class="row">
            <span class="col-xs-3">
                Username
            </span>
            <span class="col-xs-9">
                {{user.username}}
            </span>
        </div>
        <div class="row">
            <span class="col-xs-3">
                E-mail
            </span>
            <span class="col-xs-9">
                {{user.email}}
            </span>
        </div>
        <div class="row">
            <span class="col-xs-3">
                Place
            </span>
            <span class="col-xs-9">
                {{user.place}}
            </span>
        </div>
        <div class="row">
            <span class="col-xs-3">
                Points
            </span>
            <span class="col-xs-9">
                {{user.points}}
            </span>
        </div>
        <div class="row">
            <span class="col-xs-3">
                User rank
            </span>
            <span class="col-xs-9">
                {{RolesFactory.findRoleByName(user.role).beautifulName}}
            </span>
        </div>
        <div class="row">
            <span class="col-xs-3">
                Birth date
            </span>
            <span class="col-xs-9">
                {{user.birthDate | date:'MMM d, y'}}
            </span>
        </div>
        <div class="row">
            <span class="col-xs-3">
                Register date
            </span>
            <span class="col-xs-9">
                {{user.registerDate | date:'MMM d, y'}}
            </span>
        </div>
        <div class="row">
            <span class="col-xs-3">
                Registration IP
            </span>
            <span class="col-xs-9">
                {{user.registrationIp}}
            </span>
        </div>
        <div class="row">
            <span class="col-xs-3">
                Active
            </span>
            <span class="col-xs-9">
                {{!!user.active}}
            </span>
        </div>
        <div class="row">
            <span class="col-xs-3">
                Disabled
            </span>
            <span class="col-xs-9">
                {{!!user.disabled}}
            </span>
        </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-primary" ng-click="ok()">OK</button>
        <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
    </div>
</script>


<script type="text/ng-template" id="activateAdminModal.html">
    <div class="modal-header">
        <h3 class="modal-title">Account activation</h3>
    </div>
    <div class="modal-body">
        <div>
            Current status: {{user.username}} is
            <span>{{user.active ? ' active': ' not active'}}</span>
        </div>
        <div class="top-buffer-0-5-em">
            <button class="btn btn-primary" ng-click="toggleActive()">Toggle</button>
        </div>
        <div class="top-buffer-0-5-em">
            Hit OK to <span>{{activationModel ? ' activate ' : ' deactivate '}}</span> {{user.username}}.
            Hit toggle to change status.
        </div>
        <div class="top-buffer-0-5-em" style="color: red" ng-if="errorSaving">
            An error occured. Your option wasn't saved.
        </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-primary" ng-click="ok()">OK</button>
        <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
    </div>
</script>
